<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
				<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
				<head>
			
			<meta name="generator" content="www.DrExplain.com" />
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<title>主题: 数据中心服务集成</title>
<link rel="stylesheet" href="de_style.css" type="text/css" media="all" />
<link rel="stylesheet" href="style.css" type="text/css" media="all" />
					<script type="text/javascript" src="javascript_browser_detection.js"></script>
					<script type="text/javascript" src="resize.js"></script>
					<script type="text/javascript" src="lzw.js"></script>
					<script type="text/javascript" src="hidemenu.js"></script>
				
						<script type="text/javascript" src="tabber.js"></script>
						<script type="text/javascript" src="tabberoptions.js"></script>
					
						<script type="text/javascript" src="contextmenu.js"></script>
						<script type="text/javascript" src="xmlengine.js"></script>
					
						<script type="text/javascript" src="search.js"></script>
					</head>
<body>
			<table id="de_hd" cellpadding="0" cellspacing="0" style="border: none 0px black; width: 100%;"><tr style="border: none 0px black; width: 100%;"><td style="border: none 0px black; width: 100%;"><!--Header--><div class="p" style="text-align: left; direction: ltr; margin-left:0px">
&#160;</div>
<!--End of header--></td></tr></table>
			<table id="mainTable">
<tr id="trMain">
					
					<td id="sectionNav"><!--DrExplain navigation section--><div class="tabber" id="menutabber">
<div class="tabbertab" title="菜单" id="tabMenu">
<table class="menutable noscript" cellpadding="3" cellspacing="0" id="Table2">
<tr class="menu_topic_opened" id="e">
<td class="menu_topic">
<div><img alt="" style="border: 0;" width="15" height="10" src="bullet_topic.gif" />
<a class="menu" href="application.htm">Data and Service Center</a>
</div>
</td>
</tr>
<tr class="menu_topic_opened" id="e_1">
<td class="menu_topic">
<div style="border: 0; padding-left: 10px;"><img alt="" width="15" height="10" src="bullet_topic.gif" />
<a class="menu" href="module_1.htm">首页</a>
</div>
</td>
</tr>
<tr class="menu_topic_opened" id="e_2">
<td class="menu_topic">
<div style="border: 0; padding-left: 10px;"><img alt="" width="15" height="10" src="bullet_topic.gif" />
<a class="menu" href="module_2.htm">开发环境搭建与应用部署</a>
</div>
</td>
</tr>
<tr class="menu_topic_opened" id="e_3">
<td class="menu_topic">
<div style="border: 0; padding-left: 10px;"><img alt="" width="15" height="10" src="bullet_topic.gif" />
<a class="menu" href="module_3.htm">数据服务中心接口说明</a>
</div>
</td>
</tr>
<tr class="menu_topic_opened" id="e_4">
<td class="menu_topic">
<div style="border: 0; padding-left: 10px;"><img alt="" width="15" height="10" src="bullet_topic.gif" />
<a class="menu" href="module_4.htm">数据服务中心接口参数格式</a>
</div>
</td>
</tr>
<tr class="menu_topic_opened" id="e_5">
<td class="menu_topic_active">
<div style="border: 0; padding-left: 10px;"><img alt="" width="15" height="10" src="bullet_topic.gif" />
<a class="menu_active" href="module_5.htm">数据中心服务集成</a>
</div>
</td>
</tr>
<tr class="menu_topic_opened" id="e_6">
<td class="menu_topic">
<div style="border: 0; padding-left: 10px;"><img alt="" width="15" height="10" src="bullet_topic.gif" />
<a class="menu" href="module_6.htm">下载</a>
</div>
</td>
</tr>
</table>
</div>
<div class="tabbertab tabbertabhide" title="索引" id="tabIndex"><!--Index tab--></div>
<div class="tabbertab tabbertabhide" title="搜索" id="tabSearch">
<div id="search_controls">
<form onsubmit="return SubmitForm()" id="search_form" action="">
<div>
<input type="text" id="search" name="search" />
<input type="button" id="search1" name="search1" value="搜索" onclick="return SubmitForm()" />
</div>
</form>
</div>
<div id="search_output"><!--Search output--></div>
</div>
<table style="border-style: none; width: 100%; padding: 0px; margin: 0px;">
<tr style="border-style: none;">
<td style="border-style: none; width: 100%;">
<noscript><p>To properly display this page you need a browser with JavaScript support.</p></noscript>
</td>
</tr>
</table>
</div><!--End of DrExplain navigation section--></td>
<td id="sectionMain"><!--DrExplain page content--><div class="yui-u first" id="contentSection" style="height: 100%; overflow: hidden; padding-right: 0px;">
<table class="navTable" id="navTable">
<tbody>
<tr>
<td class="navLink" style=" text-align: left;"> <span style="font-size: 8pt;">
<a class="navigation" href="module_4.htm" id="a1prev">&lt; 上一页</a>
</span> </td>
<td class="navLink" style="text-align: center;">  </td>
<td class="navLink" style="text-align: right;"> <span style="font-size: 8pt;">
<a class="navigation" href="module_6.htm" id="a1next">下一页 &gt;</a>
</span> </td>
</tr>
</tbody>
</table> <div class="contentArea" id="contentArea">
<a id="top" name="top" /><table style="border-style: none; width: 100%; padding: 0px; margin: 0px;"><tr style="border-style: none;"><td style="border-style: none; width: 100%;"><div class="description_on_page"><div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_AD585692E5">集成方式介绍 </span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_3188359E34">目前，我们为第三方应用客户端提供了集成数据服务中心的方式为捆绑安装，即将数据服务中心安装包</span><span class="de_E81CB1BD18">apk</span><span class="de_3188359E34">与第三方应用客户端整合在一起，在恰当的时机，由第三方应用客户端释放并安装数据服务中心安装包</span><span class="de_E81CB1BD18">apk</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_AD585692E5">捆绑安装 </span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_3188359E34">捆绑安装的具体步骤如下所示： </span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_E81CB1BD18">1</span><span class="de_3188359E34">） 将tbDataService</span><span class="de_E81CB1BD18">.apk</span><span class="de_3188359E34">作为资源复制到第三方应用工程中的</span><span class="de_E81CB1BD18">assets</span><span class="de_3188359E34">目录。 </span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_E81CB1BD18">2</span><span class="de_34C43CE25A">） 第三方应用在需要数据中心服务时（或者其它恰当时机），先检测数据服务中心是否已经安装。如果尚未安装，则从</span><span class="de_E81CB1BD18">assets</span><span class="de_34C43CE25A">目录中提取</span><span class="de_3188359E34">tbDataService</span><span class="de_E81CB1BD18">.apk</span><span class="de_34C43CE25A">到手机存储。 </span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_E81CB1BD18">3</span><span class="de_34C43CE25A">） 安装手机存储中的数据服务中心</span><span class="de_E81CB1BD18">apk</span><span class="de_34C43CE25A">。 </span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_34C43CE25A">以下是一个代码片段，演示上述过程。 </span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
&#160;</div>
<div class="p" style="text-align: justify; direction: ltr; margin-left:0px">
<table height="480" cellspacing="0" cellpadding="0" class="de_tbl_935" width="935px" style="margin-left: 0; margin-right: auto; border: 1px solid black; direction:ltr; border-spacing:0px; border-collapse: collapse">
<col width="935" class="de_col_935"/><tr style="height: 480px">
<td class="de_td_935" style = "padding: 2px; padding-bottom: 1px; border: 1px solid black; width: 935px; vertical-align: top; " colspan = "1" rowspan = "1" >
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_3C8D7B3EB0">//捆绑安装</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_41998EA5A4"><strong>public</strong></span><span class="de_0864F56C3F"> </span><span class="de_41998EA5A4"><strong>static</strong></span><span class="de_0864F56C3F"> </span><span class="de_41998EA5A4"><strong>boolean</strong></span><span class="de_0864F56C3F"> retrieveApkFromAssets(Context context, String fileName, String path)</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_0864F56C3F">		{</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:50px">
<span class="de_0864F56C3F">			</span><span class="de_41998EA5A4"><strong>boolean</strong></span><span class="de_0864F56C3F"> bRet = </span><span class="de_41998EA5A4"><strong>false</strong></span><span class="de_0864F56C3F">;</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_0864F56C3F">			&#160; &#160; &#160; </span><span class="de_41998EA5A4"><strong>try</strong></span><span class="de_0864F56C3F">		{</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_0864F56C3F">			&#160; &#160; &#160; &#160; &#160; 	InputStream is = context.getAssets().open(fileName);</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_0864F56C3F">		</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:50px">
<span class="de_0864F56C3F">&#160; &#160; 			File file = </span><span class="de_41998EA5A4"><strong>new</strong></span><span class="de_0864F56C3F"> File(path);</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_0864F56C3F">				&#160; &#160; &#160; &#160; &#160; file.createNewFile();</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:50px">
<span class="de_0864F56C3F">&#160; &#160; 				FileOutputStream fos = </span><span class="de_41998EA5A4"><strong>new</strong></span><span class="de_0864F56C3F">&#160; FileOutputStream(file);</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left:50px">
<span class="de_0864F56C3F">&#160; &#160; 				</span><span class="de_41998EA5A4"><strong>byte</strong></span><span class="de_0864F56C3F">[] temp 	= </span><span class="de_41998EA5A4"><strong>new</strong></span><span class="de_0864F56C3F"> </span><span class="de_41998EA5A4"><strong>byte</strong></span><span class="de_0864F56C3F">[1024];</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:50px">
<span class="de_0864F56C3F">&#160; &#160; 				</span><span class="de_41998EA5A4"><strong>int</strong></span><span class="de_0864F56C3F"> i 			= 0;</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:50px">
<span class="de_0864F56C3F">&#160; &#160; 				</span><span class="de_41998EA5A4"><strong>while</strong></span><span class="de_0864F56C3F">( (i = is.read(temp)) &gt; 0 )	{</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:100px">
&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left:100px">
<span class="de_0864F56C3F">fos.write(temp, 0, i);</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_0864F56C3F">				&#160; &#160; &#160; &#160; &#160; }</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left:50px">
<span class="de_0864F56C3F">&#160; &#160; 				fos.close();</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_0864F56C3F">				&#160; &#160; &#160; &#160; &#160; is.close();</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_0864F56C3F">				</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:50px">
<span class="de_0864F56C3F">&#160; &#160; 				bRet = </span><span class="de_41998EA5A4"><strong>true</strong></span><span class="de_0864F56C3F">;</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:50px">
<span class="de_0864F56C3F">			}</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_0864F56C3F">			&#160; &#160; &#160; </span><span class="de_41998EA5A4"><strong>catch</strong></span><span class="de_0864F56C3F"> (IOException e) {</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_0864F56C3F">				&#160; &#160; &#160; &#160; &#160; e.printStackTrace();</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:50px">
<span class="de_0864F56C3F">			}</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_0864F56C3F">			</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:50px">
<span class="de_0864F56C3F">			</span><span class="de_41998EA5A4"><strong>return</strong></span><span class="de_0864F56C3F"> bRet;</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_0864F56C3F">		} 	</span></div>
<div class="p" style="text-align: left; direction: ltr; margin-left:0px">
<span class="de_0864F56C3F">	</span></div>
</td></tr></table></div>
</div></td></tr></table></div> </div><!--End of DrExplain page content--></td>
					
				</tr>
</table>
			<table id="de_ft" cellpadding="0" cellspacing="0" style="border: none 0px black; width: 100%;"><tr style="border: none 0px black; width: 100%;"><td style="border: none 0px black; width: 100%;"><!--Footer--><div class="p" style="text-align: left; direction: ltr; margin-left:0px">
&#160;</div>
<!--End of footer--></td></tr></table>
			<script type="text/javascript">onDocumentLoaded();</script>
</body></html>